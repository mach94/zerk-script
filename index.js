/* SCRIPT BY YOUR MOM */
'use strict'
const JOB_ZERK =3;

// Berserker Skills

const SKILL_STAGGERING_STRIKE = 61100; // C_START_SKILL
const SKILL_STAGGERING_STRIKE_DURATION =1275;
const SKILL_STAGGERING_STRIKE_DISTANCE =66;
const SKILL_FLATTEN = 40900; // C_START_SKILL
const SKILL_FLATTEN_DURATION =3100;
const SKILL_FLATTEN_DISTANCE =75;
const SKILL_LEAPING_STRIKE = 110800; // C_START_SKILL
const SKILL_LEAPING_STRIKE_DURATION =2250;
const SKILL_LEAPING_STRIKE_DISTANCE = 100;//250;
const SKILL_TACKLE = 260100; // C_START_SKILL
const SKILL_TACKLE_DURATION =990;
const SKILL_TACKLE_DISTANCE =80;
const SKILL_RAZE = 250900; // C_START_SKILL
const SKILL_RAZE_DURATION = 1200; //960
const SKILL_RAZE_DISTANCE =96;

const SKILL_LETHAL_STRIKE = 180600; // C_PRESS_SKILL
const SKILL_LETHAL_STRIKE_1 = 180610; // C_START_SKILL
const SKILL_LETHAL_STRIKE_2 = 180611; // C_START_SKILL
const SKILL_LETHAL_STRIKE_3 = 180612; // C_START_SKILL
const SKILL_LETHAL_STRIKE_4 = 180613; // C_START_SKILL
const SKILL_LETHAL_STRIKE_DURATION =770;
const SKILL_LETHAL_STRIKE_CAST =1550;
const SKILL_LETHAL_STRIKE_DISTANCE =170;
const SKILL_LETHAL_CHAIN_DURATION =550;
const SKILL_LETHAL_UNCHAIN_DURATION =680;

const SKILL_VAMPIRIC_BLOW = 151000; // C_PRESS_SKILL
const SKILL_VAMPIRIC_BLOW_1 = 151010; // C_START_SKILL
const SKILL_VAMPIRIC_BLOW_2 = 151011; // C_START_SKILL
const SKILL_VAMPIRIC_BLOW_3 = 151012; // C_START_SKILL
const SKILL_VAMPIRIC_BLOW_4 = 151013; // C_START_SKILL
const SKILL_VAMPIRIC_BLOW_CHAIN = 151014; // C_START_SKILL
const SKILL_VAMPIRIC_BLOW_DURATION =780;
const SKILL_VAMPIRIC_BLOW_CAST =1950;
const SKILL_VAMPIRIC_BLOW_DISTANCE =70;

const SKILL_CYCLONE = 101100; // C_PRESS_SKILL 101100
const SKILL_CYCLONE_1 = 101110; // C_START_SKILL, stage 0
const SKILL_CYCLONE_2 = 101111; // C_START_SKILL, stage 0-2
const SKILL_CYCLONE_3 = 101112; // C_START_SKILL, stage 0-3
const SKILL_CYCLONE_4 = 101113; // C_START_SKILL, stage 0-4
const SKILL_CYCLONE_DURATION = 650; // duration per charge
const SKILL_CYCLONE_SPIN = 370; // duration per spin
const SKILL_CYCLONE_DISTANCE =35;

const SKILL_THUNDERSTRIKE = 31113; // C_PRESS_SKILL  31100
const SKILL_THUNDERSTRIKE_1 = 31110; // C_START_SKILL
const SKILL_THUNDERSTRIKE_2 = 31111; // C_START_SKILL
const SKILL_THUNDERSTRIKE_3 = 31112; // C_START_SKILL
const SKILL_THUNDERSTRIKE_4 = 31113; // C_START_SKILL
const SKILL_THUNDERSTRIKE_DURATION = 650; // duration per charge
const SKILL_THUNDERSTRIKE_CAST = 1720; // duration per cast
const SKILL_THUNDERSTRIKE_DISTANCE =70;

const SKILL_EVASIVE_ROLL = 290100; // C_START_SKILL
const SKILL_EVASIVE_ROLL_DURATION =880;
const SKILL_EVASIVE_ROLL_DISTANCE = 70; //150

const SKILL_EVASIVE_SMASH_ROLL = 240200; // C_START_SKILL
const SKILL_EVASIVE_SMASH_ROLL_DURATION =970;
const SKILL_EVASIVE_SMASH_ROLL_DISTANCE = 70; //150

const SKILL_EVASIVE_SMASH_HIT_INIT =240205;
const SKILL_EVASIVE_SMASH_HIT_1 = 240210; // C_START_SKILL
const SKILL_EVASIVE_SMASH_HIT_2 = 240211; // C_START_SKILL
const SKILL_EVASIVE_SMASH_HIT_3 = 240212; // C_START_SKILL
const SKILL_EVASIVE_SMASH_HIT_4 = 240213; // C_START_SKILL
const SKILL_EVASIVE_SMASH_HIT_DURATION =1810;
const SKILL_EVASIVE_SMASH_HIT_DISTANCE =305;

const SKILL_AXE_BLOCK = 20230; // C_PRESS_SKILL
const SKILL_AXE_BLOCK_2 =20231;

const SKILL_UNCHAINED_ANGER = 120700; // C_START_SKILL, stage 0, stage 1
const SKILL_UNCHAINED_ANGER_DURATION_1 =820;
const SKILL_UNCHAINED_ANGER_DURATION_2 =420;
const SKILL_TENACITY = 190300; // C_START_SKILL, stage 0, stage 1
const SKILL_TENACITY_DURATION_1 =500;
const SKILL_TENACITY_DURATION_2 =690;
const SKILL_MOCKING_SHOUT = 70100; // C_START_SKILL, stage 0, stage 1
const SKILL_MOCKING_SHOUT_DURATION_1 =300;
const SKILL_MOCKING_SHOUT_DURATION_2 =1050;
const SKILL_FEARSOME_SHOUT = 160400; // C_START_SKILL
const SKILL_FEARSOME_SHOUT_DURATION_1 =720;
const SKILL_FEARSOME_SHOUT_DURATION_2 =1400;
const SKILL_FIERY_RAGE = 80600; // C_START_SKILL
const SKILL_FIERY_RAGE_DURATION =1300;
const SKILL_BLOODLUST = 210200; // C_START_SKILL
const SKILL_BLOODLUST_DURATION =700;
const SKILL_DASH = 50200; // C_START_SKILL
const SKILL_DASH_DURATION =700;
const SKILL_UNBREAKABLE = 270100; // C_START_SKILL
const SKILL_UNBREAKABLE_DURATION =2060;
const SKILL_TRIUMPHANT_SHOUT = 90200; // C_START_SKILL
const SKILL_TRIUMPHANT_SHOUT_DURATION =815;

const SKILL_AXE_COUNTER =300100;
const SKILL_INESCAPABLE_DOOM =200200;

const SKILL_PUNISHING_STRIKE =320100;
const SKILL_PUNISHING_STRIKE_DURATION =770;
const SKILL_PUNISHING_STRIKE_2 =320101;
const SKILL_PUNISHING_STRIKE_2_DURATION =785;

const S_P =11200;
const S_P2 =11201;
const S_P3 =11202;
const S_P4 =11203;
const S_P_D =1140;
const S_P2_D =925;
const S_P3_D =1105;
const S_P4_D =1825;

const SKILL_BLOCK =20230;

const SKILL_RETALIATE =131000;
const SKILL_RETALIATE_DURATION =1640;

const SKILL_FLATTEN_2 =40901;
const SKILL_RAZE_2 =250901;
const SKILL_STAGGERING_STRIKE_2 =61101;

const SKILL_CHARGING =311000;
const SKILL_CHARGING_DISTANCE =494;
const SKILL_CHARGING_DURATION =1110;
const SKILL_CHARGING_2 =311001;
const SKILL_CHARGING_2_DURATION =1355;

const SKILL_BERSERK_EX =330100;
const SKILL_BERSERK_EX_STAGE0 =690;
const SKILL_BERSERK_EX_STAGE1 =1530;
const SKILL_BERSERK_EX_STAGE2 =1750;

const L_CLICK_EX =350100;
const L_CLICK_EX_STAGE0 = 1965; //1130;
const L_CLICK_EX_STAGE1 = 0; //835;
const L_CLICK_EX_DISTANCE =200;
const L_CLICK_CHAIN1 = 1460; //625; //710
const L_CLICK_CHAIN2 = 0; //835; //885

const R_CLICK_EX =340100;
const R_CLICK_EX_STAGE0 = 2270; //610;
const R_CLICK_EX_STAGE1 = 0; //830;
const R_CLICK_EX_STAGE2 = 0; //830;
const R_CLICK_CHAIN1 = 1670; //835; //910
const R_CLICK_CHAIN2 = 0; //835; //940

const SKILL_ONE_EX =360100;
const SKILL_ONE_EX_DURATION =2715;
const SKILL_ONE_CHAIN_DURATION = 1600; //1730

const SKILL_TWO_EX =370100;
const SKILL_TWO_EX_STAGE0 =600;
const SKILL_TWO_EX_STAGE1 =715;
const SKILL_TWO_EX_STAGE2 =710;
const SKILL_TWO_EX_STAGE3 =400;
const SKILL_TWO_EX_STAGE4 =1095;

module.exports = function zerk(dispatch) {
	let config = {};
	let settingTimeout = null;
	let settingLock = false;

	const path = require('path');
	const fs = require('fs');

	try { config = require('./config.json'); }
	catch (e) {
		config = {};
		settingUpdate();
	}

	function settingUpdate() {
		clearTimeout(settingTimeout);
		settingTimeout = setTimeout(settingSave,1000);
	}

	function settingSave() {
		if (settingLock) {
			settingUpdate();
			return;
		}

		settingLock = false;
		fs.writeFile(path.join(__dirname, 'config.json'), JSON.stringify(config, undefined, '\t'), err => {
			settingLock = false;
		});
};
